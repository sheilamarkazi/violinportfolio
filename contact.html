<!DOCTYPE html>

<html>

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sheila Markazi</title>
    <link rel="stylesheet" href="styles.css">
  </head>

  <body>
    <main>

    <nav class="container">
      <ul class="navflexcontainer">
        <li><a class="nav" href=about.html>About</a></li>
        <li><a class="nav" href=lutherie.html>Lutherie</a></li>
        <li><h1 class="name"><a class="name" href="index.html">Sheila Markazi</a><h1></li>
        <li><a class="nav" href=tunes.html>Tunes</a></li>
        <li><a class="nav" href=contact.html>Contact</a></li>
      </ul>
    </nav>

    <form id="serverless-contact-form">
    <input type="text" name="email" placeholder="Email Address" class="form-email">
    <input type="text" name="subject" placeholder="Subject" class="form-subject">
    <textarea rows="5" cols="40" name="message" placeholder="Your message here..." class="form-message"></textarea>
    <input type="submit" name="submit" value="Submit" class="form-submit">
  </form>

  <script type="text/javascript">
    // Adds an event listener to our form. When the form is submitted, it will send data to our Lambda function, which in turn, will send us an email.
    document.getElementById('serverless-contact-form').addEventListener('submit', sendDataToLambda);
    // Now for the good stuff. This is the function that will send our data to AWS.
    function sendDataToLambda(e) {
      e.preventDefault();
      // Gets the values of each field in our form. This is the data we'll send to our Lambda function.
      var formEmail = document.querySelector('.form-email').value;
      var formSubject = document.querySelector('.form-subject').value;
      var formMessage = document.querySelector('.form-message').value;
      // This is the endpoint we created in our API Gateway. This is where we make our POST request, which calls our Lambda function.
      var endpoint = 'https://d4f6vh3un8.execute-api.us-east-1.amazonaws.com/prod/ContactFormLambda';
      // Remember those form values we just grabbed? We're going to put them into an object here.
      var body = {
        email: formEmail,
        subject: formSubject,
        message: formMessage
      }
      // Here, we instantiate our Request. This is a special object used by the Fetch API so it knows where to send data, what data to send, and how to send it.
      var lambdaRequest = new Request(endpoint, {
        method: 'POST',
        // Quick note: 'no-cors' mode is for development on localhost only!
        mode: 'no-cors',
        body: JSON.stringify(body)
      });
      // Call the Fetch API to make our request
      fetch(lambdaRequest)
        .then(response => {
          // If the request succeeds, put confirmation text into our element:
          confirmation.innerText = "Thanks for your message! We'll be in touch soon.";
        })
        .catch(err => {
          // If there's an error, ask them to try again
          confirmation.innerText = "Oops! Something went wrong, please try again.";
        });
    }
  </script>

  <div class="maintextdiv">
    <div class="maincontentcontainer">
      <div class="formcontainer">
        <form id="contact" action="" method="post"> <!--i don't know what this is-->
          <h1 class="maincontentheader">I'd Love to Hear From You</h1>
          <fieldset>
            <input class="shortinput" placeholder="Your Name" type="text" required>
          </fieldset>
          <fieldset>
            <input class="shortinput" placeholder="Your E-mail" type="email" required>
          </fieldset>
          <fieldset>
            <input class="shortinput" placeholder="Your Phone Number" type="tel">
          </fieldset>
          <fieldset>
            <textarea class="longinput" placeholder="Your Message" type="text"></textarea>
          </fieldset>
          <fieldset>
          <div class="submitwrapper">
            <input class="submitbutton" type="submit" name="submit">
          </div>
          </fieldset>

        </form>
      </div>
    </div>
  </div>
<!--
    <div class="formcontainer">
      <form action="action-page.php" method="post">

        <p>
        <div><label for="fname">First Name</label></div>
        <div class="field"><input type="text" id="fname" name="fname" required></div>
        </p>

        <p>
        <div><label for="fname">Last Name</label></div>
        <div class="field"><input type="text" id="lname" name="lname"></div>
        </p>

        <p>
        <div><label for="fname">E-Mail</label></div>
        <div class="field"><input type="text" id="email" name="email" required></div>
        </p>

        <p>
        <div><label for="message">Message</label></div>
        <div class="field"><textarea name="message" required></textarea></div>
        </p>

        <p>
        <input type="submit" name="submit">
        </p>


      </form>
    </div>
    -->

</main>

<div class="footer-container">
  <div class="socialmedia">
    <p class="footer">
      <a href="https://www.instagram.com/sheilamarkazi/" target="_blank">
        <img src="instagram.png" class="icon"></a>
      <a href="https://www.facebook.com/profile.php?id=1953845" target="_blank">
        <img src="facebook.png" class="icon"></a></p>

    </p>
  </div>
  <div class="copyright">
    <p class="footer">Website by <strong>Sheila Markazi</strong>, Â© 2019</p>
  </div>
  <div class="address">
  <p class="footer">Mount Airy, NC</p>
  </div>
</div>

</body>
